<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia documental per recerques amb dades personals</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
        <style>
        /* Estils del pop up */
        .decision-modal .modal-dialog {
            max-width: 750px;
        }
        .decision-modal .step {
            margin: 20px 0;
            padding: 15px 20px;
            border-radius: 0 5px 5px 0;
        }
        .decision-modal .hidden {
            display: none;
        }
        .decision-modal .btn-option {
            margin: 5px 5px 5px 0;
            min-width: 120px;
        }
        .decision-modal .btn-option.active {
            background-color: #0d6efd;
            color: white;
        }
        .decision-modal h2 {
            color: #0d6efd;
            margin-bottom: 30px;
            padding-bottom: 10px;
            border-bottom: 1px solid #dee2e6;
        }
    </style>
</head>
<body>
    <!-- Barra de navegació -->
    <nav class="navbar navbar navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="bi bi-card-list"></i> Guia documental per recerques amb dades personals
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <!-- Elements del menú -->
                    <li class="nav-item">
                        <a class="nav-link active" href="index.html">Introducció</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="pladades.html">Pla de dades</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="consentiment.html">Documentació necessària</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Contingut principal -->
    <div class="container">
        <div class="row">

            <!-- Esquerra -->
            <div class="col-md-3 mt-4">

                <!-- Accés ràpid -->
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <i class="bi bi-list-check"></i> Accés ràpid
                    </div>
                    <div class="accordion" id="navAccordion">
                        <!-- Introducció -->
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" disabled>
                                    <i class="bi bi-info-circle me-2"></i> Introducció
                                </button>
                            </h2>
                            <div id="introCollapse" class="accordion-collapse show">
                                <div class="list-group list-group-flush">
                                    <a href="#qui" class="list-group-item list-group-item-action">
                                        Per a qui i per a què serveix aquesta web
                                    </a>
                                    <a href="#tipus-dades" class="list-group-item list-group-item-action">
                                        Tipus de dades personals
                                    </a>
                                    <a href="#preguntes" class="list-group-item list-group-item-action">
                                        Preguntes freqüents
                                    </a>
                                </div>
                            </div>
                        </div>
                    
                        <!-- Pla de Dades -->
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <a href="pladades.html" class="accordion-button" style="text-decoration: none; color: inherit; font-weight: normal; background-color: #e9ecef;">
                                    <i class="bi bi-clipboard-data me-2"></i> Pla de Dades
                                </a>
                            </h2>
                        </div>

                        <!-- Documentació -->
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <a href="consentiment.html" class="accordion-button" style="text-decoration: none; color: inherit; font-weight: normal; background-color: #e9ecef;">
                                    <i class="bi bi-folder me-2"></i> Documentació necessària
                                </a>
                            </h2>
                        </div>
                    </div>
                </div>

                <!-- Recursos -->
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <i class="bi bi-book"></i> Recursos
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled">
                            <li class="mb-2"><a href="https://www.aepd.es/"><i class="bi bi-link-45deg"></i> Agencia Espanyola Protecció Dades</a></li>
                            <li class="mb-2"><a href="https://www.ub.edu/comissiobioetica/es"><i class="bi bi-link-45deg"></i> Comissió de Bioética de la UB</a></li>
                        </ul>
                    </div>
                </div>
            </div>


            <!-- Centre -->
            <div class="col-md-9 mt-4">

                <!-- Secció Per a qui és -->
                <section id="qui" class="mb-5">
                    <div class="card info-card">
                        <div class="card-body">
                            <h2><i class="bi bi-question-circle"></i> Per a qui i per a què serveix aquesta web</h2>
                            <p>Aquesta web està pensada per què tu com a investigador, puguis fer la teva recerca amb usuaris i/o les seves dades personals seguint bones pràctiques en la gestió de dades i privacitat.</p>
                            <p>Si estàs dins del col·lectiu de la Universitat de Barcelona (UB), pots seguir <a href="doc/RecercadorsUB.pdf" target="_blank">aquesta guia</a> detallada per recercadors de la UB per presentar la teva recerca a la Comissió de Bioètica.</p>
                        </div>
                    </div>
                </section>

                <!-- Ajuda -->
                <p>Si vols tenir una ajuda per saber quins <strong>documents necessites</strong> a la teva recerca, pots consultar de manera interactiva aquest arbre: </p>
                <div class="text-center mt-3 mb-5">
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#decisionTreeModal">
                        <i class="bi bi-diagram-3"></i> Consulta l'arbre de decisions
                    </button>
                </div>

                <!-- Secció Tipus de dades personals -->
                <section id="tipus-dades" class="mb-5">
                    <div class="card info-card">
                        <div class="card-body">
                            <h2><i class="bi bi-person-lines-fill"></i> Tipus de dades personals</h2>
                            <p>Les dades personals es classifiquen segons la seva capacitat d'identificar persones i la sensibilitat de la informació.</p>

                            <!-- Taula amb exemples -->
                            <table class="table">
                                <thead class="table table-info">
                                    <tr>
                                        <th>Tipus de dades</th>
                                        <th>Exemples</th>
                                        <th>Nivell de protecció</th>
                                        <th>Requisits legals</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Bàsiques</td>
                                        <td>Nom, edat, mail</td>
                                        <td><span class="badge bg-primary">Normal</span></td>
                                        <td>Consentiment informat</td>
                                    </tr>
                                    <tr>
                                        <td>Sensibles</td>
                                        <td>Religió, ideologia política, imatge propia</td>
                                        <td><span class="badge bg-danger">Alt</span></td>
                                        <td>Consentiment informat + consentiment explícit</td>
                                    </tr>
                                    <tr>
                                        <td>Anonimitzades</td>
                                        <td>Enquestes sense identificadors, estadístiques agregades (Percentatges %)</td>
                                        <td><span class="badge bg-success">Mínim</span></td>
                                        <td>No requereix consentiment (No aplica <abbr title="Reglament General de Protecció de Dades">RGPD</abbr>)</td>
                                    </tr>
                                </tbody>
                            </table>
                            <p class="small">Les dades <strong>bàsiques</strong> identifiquen directament, les <strong>sensibles</strong> requereixen protecció especial per risc de discriminació, i les <strong>anonimitzades</strong> no permeten identificar individus, per la qual cosa no s'apliquen les mateixes restriccions legals.</p>
                        </div>
                    </div>
                </section>

                <!-- Secció Preguntes freqüents -->
                <section id="preguntes" class="mb-5">
                    <div class="card info-card">
                        <div class="card-body">
                            <h2><i class="bi bi-card-checklist"></i> Preguntes freqüents</h2>
                            <div class="accordion">
                                <div class="accordion-item">
                                    <button class="accordion-button collapsed bg-light" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                        És necessari sempre el consentiment?
                                    </button>
                                    <div id="faq1" class="accordion-collapse collapse">
                                        <div class="accordion-body">
                                            <p><strong>No</strong>, només per a dades personals identificables (bàsiques: consentiment informat; sensibles: consentiment informat i explícit). </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <button class="accordion-button collapsed bg-light" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                        Quina és la diferència entre consentiment informat i explícit?
                                    </button>
                                    <div id="faq2" class="accordion-collapse collapse">
                                        <div class="accordion-body">
                                            <p>L'informat és obligatori per a totes les recerques que impliquen dades personals, l'explícit és per a dades personals sensibles i en cas de no tenir-hi no és necessari.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            
            <!-- Modal del arbre de decisions -->
            <div class="modal fade decision-modal" id="decisionTreeModal" tabindex="-1" aria-labelledby="decisionTreeModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header bg-primary text-white">
                            <h5 class="modal-title" id="decisionTreeModalLabel">
                                <i class="bi bi-diagram-3"></i> Arbre de decisions
                            </h5>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="container bg-white p-4 rounded shadow-sm">
                                <div class="step" id="step1">
                                    <p class="fw fs-5">Independentment de quin tipus de dades tenim, s'ha de fer un <strong><a href="pladades.html#pla">pla de dades</a></strong></p>
                                    <p class="fw-bold fs-5">1. Tens dades personals?</p>
                                    <button class="btn btn-outline-primary btn-option" onclick="goToStep('step1', 'step2')">Sí</button>
                                    <button class="btn btn-outline-primary btn-option" onclick="goToStep('step1', 'step7')">No</button>
                                </div>

                                <div class="step hidden" id="step2">
                                    <p class="fw fs-5">S'ha de fer el <strong><a href="consentiment.html#informatiu">full informatiu</a></strong></p>
                                    <p class="fw-bold fs-5">2. Com es recullen les dades?</p>
                                    <button class="btn btn-outline-primary btn-option" onclick="goToStep('step2', 'step3')">No anonimitzades</button>
                                    <button class="btn btn-outline-primary btn-option" onclick="goToStep('step2', 'step6')">Anonimitzades 100%</button>
                                </div>

                                <div class="step hidden" id="step3">
                                    <p class="fw fs-5">S'ha de fer el <strong><a href="consentiment.html#consentiment-informat">consentiment informat</a></strong></p>
                                    <p class="fw-bold fs-5">3. Tens dades sensibles?</p>
                                    <button class="btn btn-outline-primary btn-option" onclick="goToStep('step3', 'step4')">Sí</button>
                                    <button class="btn btn-outline-primary btn-option" onclick="goToStep('step3', 'step5')">No</button>
                                </div>

                                <div class="step hidden" id="step4">
                                    <p class="fw fs-5">S'ha d'afegir el <strong><a href="consentiment.html#consentiment-informat">consentiment explícit</a></strong></p>
                                    <p class="fw-bold fs-5 text-success">Ja pots fer la recerca.</p>
                                    <div class="alert alert-success mt-3">
                                    <i class="bi bi-check-circle-fill"></i> Tots els requisits estan complerts. Pots procedir amb la recerca.
                                    <p><strong>Documentació necessaria: Pla de dades, Full informatiu, Consentiment informat i Consentiment explícit</strong></p>
                                    </div>
                                </div>

                                <div class="step hidden" id="step5">
                                    <p class="fw-bold fs-5 text-success">Ja pots fer la recerca.</p>
                                    <div class="alert alert-success mt-3">
                                    <i class="bi bi-check-circle-fill"></i> Tots els requisits estan complerts. Pots procedir amb la recerca.
                                    <p><strong>Documentació necessaria: Pla de dades, Full informatiu i Consentiment informat</strong></p>
                                    </div>
                                </div>

                                <div class="step hidden" id="step6">
                                    <p class="fw-bold fs-5 text-success">No aplica RGPD. Ja pots fer la recerca.</p>
                                    <div class="alert alert-success mt-3">
                                    <i class="bi bi-check-circle-fill"></i> Com que les dades estan completament anonimitzades, no s'aplica el RGPD. Pots procedir amb la recerca.
                                    <p><strong>Documentació necessaria: Pla de dades i Full informatiu</strong></p>
                                    </div>
                                </div>

                                <div class="step hidden" id="step7">
                                    <p class="fw-bold fs-5 text-success">No aplica RGPD. Ja pots fer la recerca.</p>
                                    <div class="alert alert-success mt-3">
                                    <i class="bi bi-check-circle-fill"></i> Com que no hi ha dades personals, no s'aplica el RGPD. Pots procedir amb la recerca.
                                    <p><strong>Documentació necessaria: Pla de dades</strong></p>
                                    </div>
                                </div>

                                <div class="mt-4 pt-3 border-top text-center">
                                    <button class="btn btn-outline-secondary" onclick="resetSteps()">Reiniciar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

                <script>
                const stepOrder = [
                    "step1", "step2", "step3", "step4", "step5", "step6", "step7"
                ];

                function goToStep(fromId, toId) {
                    // Ocultar tot el que hi ha despres del actual
                    const fromIndex = stepOrder.indexOf(fromId);
                    for (let i = fromIndex + 1; i < stepOrder.length; i++) {
                    document.getElementById(stepOrder[i]).classList.add('hidden');
                    }

                    // Mostrar el següent pas
                    document.getElementById(toId).classList.remove('hidden');

                    // Petit moviment al seleccionar el següent pas
                    document.getElementById(toId).scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                    });

                    // Treu el active dels botons
                    const currentStep = document.getElementById(fromId);
                    const buttons = currentStep.querySelectorAll('.btn-option');
                    buttons.forEach(button => {
                    button.classList.remove('active');
                    });

                    // Afegeix el active al clickat
                    event.target.classList.add('active');
                }

                function resetSteps() {
                    // Esborrar tot menys el primer
                    for (let i = 1; i < stepOrder.length; i++) {
                    document.getElementById(stepOrder[i]).classList.add('hidden');
                    }
                    
                    // Treu els active dels botons
                    document.querySelectorAll('.btn-option').forEach(button => {
                    button.classList.remove('active');
                    });

                    // Tornem al primer pas
                    document.getElementById('step1').scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                    });
                }
            </script>

        </div>
    </div>

    <!-- Footer -->
    <footer style="background-color: #e6f0ff; padding: 20px; text-align: center; font-size: 14px; color: #003366; border-top: 1px solid #b3d1ff;">
        <p>Aquesta web ha estat desenvolupada com a part del Treball de Fi de Grau (TFG)</p>
        <p><strong>Judit Buj Soler</strong> · Grau en Enginyeria Informàtica · Universitat de Barcelona · 2025</p>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>